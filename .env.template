# ARASUL PLATFORM - Environment Configuration Template
# Copy this file to .env and fill in the values

# System Configuration
SYSTEM_NAME=arasul
SYSTEM_VERSION=1.0.0
BUILD_HASH=dev-build
JETPACK_VERSION=6.0

# Network Configuration
INTERNAL_IP=172.30.0.1
SUBNET=172.30.0.0/24
HTTP_PORT=80
HTTPS_PORT=443

# Admin Configuration
# IMPORTANT: Bootstrap script will generate secure random password and hash
ADMIN_USERNAME=admin
ADMIN_PASSWORD=lolol==
ADMIN_HASH=

# JWT Configuration
# IMPORTANT: Bootstrap script will generate cryptographically secure 256-bit secret
JWT_SECRET=31ca57fc9c86bd0f2f7dc3890eda256a3e2fd6048e8e33b3a718bed8b7622cc9
JWT_EXPIRY=24h

# Database Configuration
POSTGRES_USER=arasul
POSTGRES_PASSWORD=arasul123
POSTGRES_DB=arasul_db
POSTGRES_HOST=postgres-db
POSTGRES_PORT=5432
POSTGRES_MAX_CONNECTIONS=100

# Database Connection Pool Configuration
POSTGRES_POOL_MIN=2
POSTGRES_POOL_MAX=20
POSTGRES_IDLE_TIMEOUT=30000
POSTGRES_CONNECTION_TIMEOUT=10000
POSTGRES_STATEMENT_TIMEOUT=30000

# MinIO Configuration
MINIO_ROOT_USER=arasul_minio_admin
MINIO_ROOT_PASSWORD=/JGwucrWRZ9WqHr17YWfGcW3u3WVe04d15JDzGDXhq8=
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_BROWSER=true

# LLM Service Configuration
LLM_SERVICE_HOST=llm-service
LLM_SERVICE_PORT=11434
LLM_SERVICE_MANAGEMENT_PORT=11436
LLM_MODEL=qwen3:14b-q8
LLM_MODEL_TYPE=ollama
LLM_MAX_TOKENS=2048
LLM_TEMPERATURE=0.7
LLM_GPU_LAYERS=-1
LLM_CONTEXT_SIZE=4096
LLM_MAX_RAM_GB=40
# Model keep-alive in RAM (seconds, 0=unload after each request)
LLM_KEEP_ALIVE_SECONDS=300

# Model Management Configuration
# Enable smart batching: process all requests for current model before switching
MODEL_BATCHING_ENABLED=true
# Maximum wait time before forcing a model switch (seconds)
MODEL_MAX_WAIT_SECONDS=120
# Cooldown between model switches (seconds)
MODEL_SWITCH_COOLDOWN_SECONDS=5

# Jetson RAM Configuration
# Total available RAM on Jetson device (GB)
JETSON_TOTAL_RAM_GB=64
# RAM reserved for system and other services (GB)
JETSON_RESERVED_RAM_GB=10

# Embedding Service Configuration
EMBEDDING_SERVICE_HOST=embedding-service
EMBEDDING_SERVICE_PORT=11435
EMBEDDING_MODEL=nomic-ai/nomic-embed-text-v1.5
EMBEDDING_MODEL_TYPE=sentence_transformers
EMBEDDING_VECTOR_SIZE=768
EMBEDDING_MAX_INPUT_TOKENS=4096

# Qdrant Vector Database Configuration
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_COLLECTION_NAME=documents

# Document Indexer Configuration
DOCUMENT_INDEXER_INTERVAL=30
DOCUMENT_INDEXER_CHUNK_SIZE=500
DOCUMENT_INDEXER_CHUNK_OVERLAP=50
DOCUMENT_INDEXER_MINIO_BUCKET=documents

# n8n Configuration
N8N_HOST=n8n
N8N_PORT=5678
N8N_WEBHOOK_PORT=5679
# Basic Auth disabled - n8n uses Dashboard SSO via Traefik forward-auth
N8N_BASIC_AUTH_ACTIVE=false
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=arasul123
N8N_ENCRYPTION_KEY=arasul-dev-n8n-encryption-key-32
# N8N_SECURE_COOKIE and N8N_EDITOR_BASE_URL are set in docker-compose.yml
# for proper LAN access via Traefik reverse proxy

# Metrics Collector Configuration
METRICS_INTERVAL_LIVE=5
METRICS_INTERVAL_PERSIST=30
METRICS_RETENTION_DAYS=7

# Self-Healing Configuration
SELF_HEALING_INTERVAL=10
SELF_HEALING_ENABLED=true
SELF_HEALING_REBOOT_ENABLED=false
SELF_HEALING_LOG_LEVEL=INFO

# Backup Configuration
# Schedule: cron format (default: 2:00 AM daily)
BACKUP_SCHEDULE=0 2 * * *
# Retention: days to keep daily backups (default: 30)
BACKUP_RETENTION_DAYS=30
# Optional: S3 bucket for offsite backups
# AWS_S3_BUCKET=
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=eu-central-1

# Reverse Proxy Configuration
PROXY_HOST=reverse-proxy
PROXY_DASHBOARD_FRONTEND_PORT=3000
PROXY_DASHBOARD_BACKEND_PORT=3001

# Dashboard Configuration
DASHBOARD_BACKEND_PORT=3001
DASHBOARD_FRONTEND_PORT=3000

# CORS Configuration for external access
# Local network addresses (192.168.x.x, 10.x.x.x, 172.16-31.x.x) are auto-allowed
# Use this for additional origins (comma-separated)
# Example: ALLOWED_ORIGINS=https://my-domain.com,http://custom-host:8080
ALLOWED_ORIGINS=

# Resource Limits (CPU limits as decimal core count)
CPU_LIMIT_LLM=6.0
CPU_LIMIT_EMBEDDING=3.6
CPU_LIMIT_DASHBOARD=0.6
RAM_LIMIT_LLM=32G
RAM_LIMIT_EMBEDDING=8G
RAM_LIMIT_N8N=2G
RAM_LIMIT_POSTGRES=8G

# Disk Thresholds
DISK_WARNING_PERCENT=80
DISK_CLEANUP_PERCENT=90
DISK_CRITICAL_PERCENT=95
DISK_REBOOT_PERCENT=97

# Update System
UPDATE_PUBLIC_KEY_PATH=/arasul/config/public_update_key.pem
UPDATE_CHECK_INTERVAL=86400

# Logging
LOG_LEVEL=INFO
LOG_MAX_SIZE_MB=50
LOG_MAX_FILES=10
LOG_DIR=/arasul/logs

# Timezone
TZ=UTC
